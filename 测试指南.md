# 🧪 测试指南 - 修复后验证

## ✅ 已修复的问题

1. **图谱显示问题** ✅
   - 增加高度到 800px
   - 启用滚动
   - 添加详细错误信息
   - 修复 session_state 逻辑

2. **Tab 渲染问题** ✅
   - 使用 `show_results` 状态控制
   - Mine 完成后强制 rerun

3. **Rising Edges 显示** ✅
   - Fallback 模式正确显示
   - 显示窗口诊断信息

---

## 🚀 立即测试

### 方法 1：使用快速重启脚本

双击运行：
```
scripts/restart_dashboard.bat
```

### 方法 2：手动命令

```bash
cd D:\multisim\MediaCrawler-main

# 停止当前 Streamlit（如果在运行）
# 按 Ctrl+C

# 清除缓存
uv run streamlit cache clear

# 重新启动
uv run python -m streamlit run src/app/dashboard.py
```

---

## 📋 验证清单

启动后，在浏览器中：

### ✅ 1. 初始状态检查

- [ ] 页面标题："AI Tools 数据挖掘工作站"
- [ ] 左侧边栏有5个区域（控制面板、样例管理、统计、导出、日志）
- [ ] 数据统计显示：Raw 20, Clean 20
- [ ] 主区域显示使用说明

### ✅ 2. Mine 流程检查

- [ ] 选择 "Sample Data (演示模式)"
- [ ] 点击 "🔍 Mine（挖掘）" 按钮
- [ ] 看到进度条：0% → 100%
- [ ] 看到阶段文本：步骤 1/5 → 5/5
- [ ] 展开"详细日志"能看到实时日志
- [ ] 显示 "✅ 挖掘完成！请查看下方结果"

### ✅ 3. 结果显示检查（关键！）

**应该自动显示两个 Tab**：

#### Tab 1：📊 图谱分析

- [ ] **图谱可视化**：
  - 看到交互式网络图（彩色节点和边）
  - 可以拖拽节点
  - 可以缩放（鼠标滚轮）
  - 鼠标悬停节点显示详情

- [ ] **PageRank Top 榜单**：
  - 左侧表格，15行数据
  - 包含：排名、标签、PageRank 分数
  - 第1名应该是 "AI工具"（~0.0453）

- [ ] **Rising Edges 趋势榜**：
  - 右侧表格
  - 显示模式标识："⚠️ 模式: Fallback"
  - 显示窗口信息："Anchor: 2026-01-15... | Recent: 2 | Historical: 4"
  - 表格显示共现次数（因为是 Fallback 模式）

#### Tab 2：📝 原帖样本

- [ ] 看到笔记卡片列表
- [ ] 可以展开查看详情（标题、描述、标签、图片数、链接）
- [ ] 有分页选择（页码下拉框）

---

## 🎯 如果仍然看不到图谱

### 快速检查

1. **确认 Tab 是否显示**：
   - 在 "✅ 挖掘完成" 消息下方
   - 应该有两个 Tab 按钮：📊 图谱分析 | 📝 原帖样本
   - 如果没有，可能需要向下滚动

2. **手动打开图谱文件验证**：
   ```bash
   # 在浏览器中直接打开
   # 文件位置：D:\multisim\MediaCrawler-main\data\output\graph.html
   ```
   如果本地能打开，说明图谱生成成功，只是 Streamlit 嵌入的问题

3. **查看浏览器控制台**：
   - 按 `F12`
   - 切换到 Console 标签
   - 看是否有 JavaScript 错误

---

## 🔧 紧急修复方案

如果上述修复后仍然不显示，在浏览器中：

1. **硬刷新**：`Ctrl + Shift + R`（清除缓存）
2. **清除 Streamlit 缓存**：
   - 命令行运行 `uv run streamlit cache clear`
   - 重新启动
3. **使用无痕模式**：
   - `Ctrl + Shift + N`（Chrome）
   - 访问 `http://localhost:8501`

---

## 📞 反馈给我

重启后，告诉我：

1. ✅ 能看到 Tab 1/Tab 2 吗？
2. ✅ 图谱能显示吗（交互式网络图）？
3. ✅ PageRank 和 Rising Edges 表格有数据吗？

如果仍有问题，截图给我看！🚀